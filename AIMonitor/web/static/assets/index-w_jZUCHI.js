import{u as e,j as s,H as a}from"./index-iWHkNrXX.js";import{r as i}from"./vendor-D6r2_tUy.js";import{H as r,J as l,A as n,q as t,aE as d,B as m,aF as o,K as c,aG as x,aH as j,X as h,Q as p,ac as u,aD as g,P as f,a6 as y}from"./antd-C8aMnYDz.js";const{Option:v}=h,w=()=>{const[w]=r.useForm(),[P]=r.useForm(),[b,I]=i.useState(!1),[N,F]=i.useState(!1),{user:q,updateUser:z}=e();return s.jsxs(s.Fragment,{children:[s.jsxs(a,{children:[s.jsx("title",{children:"个人资料 - AI Monitor System"}),s.jsx("meta",{name:"description",content:"管理个人信息和账户设置"})]}),s.jsxs("div",{className:"fade-in",children:[s.jsxs("div",{className:"mb-24",children:[s.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"个人资料"}),s.jsx("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"管理您的个人信息和账户设置"})]}),s.jsxs("div",{style:{maxWidth:800},children:[s.jsx(l,{title:"基本信息",className:"card-shadow mb-24",children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"24px",marginBottom:"24px"},children:[s.jsxs("div",{style:{textAlign:"center"},children:[s.jsx(n,{size:100,icon:s.jsx(t,{}),src:null==q?void 0:q.avatar}),s.jsx("div",{style:{marginTop:"12px"},children:s.jsx(d,{showUploadList:!1,beforeUpload:e=>{const s="image/jpeg"===e.type||"image/png"===e.type;s||y.error("只能上传 JPG/PNG 格式的图片!");const a=e.size/1024/1024<2;return a||y.error("图片大小不能超过 2MB!"),s&&a},onChange:e=>{"done"===e.file.status?y.success("头像上传成功"):"error"===e.file.status&&y.error("头像上传失败")},action:"/api/upload/avatar",children:s.jsx(m,{icon:s.jsx(o,{}),size:"small",children:"更换头像"})})})]}),s.jsx("div",{style:{flex:1},children:s.jsxs(r,{form:w,layout:"vertical",onFinish:async e=>{I(!0);try{await new Promise(e=>setTimeout(e,1e3)),z({...q,...e}),y.success("个人信息更新成功")}catch(s){y.error("更新失败，请重试")}finally{I(!1)}},initialValues:{username:(null==q?void 0:q.username)||"admin",email:(null==q?void 0:q.email)||"admin@example.com",phone:(null==q?void 0:q.phone)||"13800138000",department:(null==q?void 0:q.department)||"技术部",position:(null==q?void 0:q.position)||"系统管理员",language:"zh-CN",timezone:"Asia/Shanghai",emailNotifications:!0,smsNotifications:!1},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[s.jsx(r.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"}],children:s.jsx(c,{prefix:s.jsx(t,{})})}),s.jsx(r.Item,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:s.jsx(c,{prefix:s.jsx(x,{})})}),s.jsx(r.Item,{label:"手机号",name:"phone",rules:[{required:!0,message:"请输入手机号"}],children:s.jsx(c,{prefix:s.jsx(j,{})})}),s.jsx(r.Item,{label:"部门",name:"department",children:s.jsxs(h,{children:[s.jsx(v,{value:"技术部",children:"技术部"}),s.jsx(v,{value:"运维部",children:"运维部"}),s.jsx(v,{value:"产品部",children:"产品部"}),s.jsx(v,{value:"市场部",children:"市场部"})]})}),s.jsx(r.Item,{label:"职位",name:"position",children:s.jsx(c,{})}),s.jsx(r.Item,{label:"语言",name:"language",children:s.jsxs(h,{children:[s.jsx(v,{value:"zh-CN",children:"简体中文"}),s.jsx(v,{value:"en-US",children:"English"})]})})]}),s.jsx(p,{children:"通知偏好"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[s.jsx(r.Item,{label:"邮件通知",name:"emailNotifications",valuePropName:"checked",children:s.jsx(u,{})}),s.jsx(r.Item,{label:"短信通知",name:"smsNotifications",valuePropName:"checked",children:s.jsx(u,{})})]}),s.jsx(r.Item,{children:s.jsx(m,{type:"primary",htmlType:"submit",loading:b,icon:s.jsx(g,{}),children:"保存更改"})})]})})]})}),s.jsx(l,{title:"修改密码",className:"card-shadow",children:s.jsxs(r,{form:P,layout:"vertical",onFinish:async e=>{F(!0);try{await new Promise(e=>setTimeout(e,1e3)),y.success("密码修改成功"),P.resetFields()}catch(s){y.error("密码修改失败，请重试")}finally{F(!1)}},style:{maxWidth:400},children:[s.jsx(r.Item,{label:"当前密码",name:"currentPassword",rules:[{required:!0,message:"请输入当前密码"}],children:s.jsx(c.Password,{prefix:s.jsx(f,{})})}),s.jsx(r.Item,{label:"新密码",name:"newPassword",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度至少6位"}],children:s.jsx(c.Password,{prefix:s.jsx(f,{})})}),s.jsx(r.Item,{label:"确认新密码",name:"confirmPassword",dependencies:["newPassword"],rules:[{required:!0,message:"请确认新密码"},({getFieldValue:e})=>({validator:(s,a)=>a&&e("newPassword")!==a?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()})],children:s.jsx(c.Password,{prefix:s.jsx(f,{})})}),s.jsx(r.Item,{children:s.jsx(m,{type:"primary",htmlType:"submit",loading:N,children:"修改密码"})})]})})]})]})]})};export{w as default};
