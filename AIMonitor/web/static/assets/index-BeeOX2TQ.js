import{j as e,H as l}from"./index-DrnK1xwv.js";import{r as s}from"./vendor-D6r2_tUy.js";import{H as a,S as r,B as i,Y as n,aD as d,J as m,a as t,K as c,ab as o,X as h,Q as x,ac as u,a8 as j,a3 as b,b as p,a9 as g,c as y,a6 as I,a4 as v}from"./antd-C8aMnYDz.js";const{Option:P}=h,{TextArea:q}=c,S=()=>{const[S]=a.useForm(),[w,k]=s.useState(!1),[A,T]=s.useState("general"),[N,C]=s.useState(!1),[f,F]=s.useState(null),[K]=a.useForm(),[U,V]=s.useState([]);return e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx("title",{children:"系统设置 - AI Monitor System"}),e.jsx("meta",{name:"description",content:"系统配置和参数设置"})]}),e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"系统设置"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"配置系统参数和监控选项"})]}),e.jsxs(r,{children:[e.jsx(i,{icon:e.jsx(n,{}),onClick:()=>{S.resetFields(),I.info("已重置为默认设置")},children:"重置"}),e.jsx(i,{type:"primary",icon:e.jsx(d,{}),loading:w,onClick:()=>S.submit(),children:"保存设置"})]})]}),e.jsx(m,{className:"card-shadow",children:e.jsx(t,{activeKey:A,onChange:T,items:[{key:"general",label:"常规设置",children:e.jsx(a,{form:S,layout:"vertical",onFinish:async e=>{k(!0);try{await new Promise(e=>setTimeout(e,1e3)),I.success("设置保存成功")}catch(l){I.error("保存失败，请重试")}finally{k(!1)}},initialValues:{systemName:"AI Monitor System",refreshInterval:30,timezone:"Asia/Shanghai",language:"zh-CN",enableNotifications:!0},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"系统名称",name:"systemName",rules:[{required:!0,message:"请输入系统名称"}],children:e.jsx(c,{placeholder:"请输入系统名称"})}),e.jsx(a.Item,{label:"数据刷新间隔（秒）",name:"refreshInterval",rules:[{required:!0,message:"请输入刷新间隔"}],children:e.jsx(o,{min:5,max:300,style:{width:"100%"}})}),e.jsx(a.Item,{label:"时区",name:"timezone",rules:[{required:!0,message:"请选择时区"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"Asia/Shanghai",children:"Asia/Shanghai (UTC+8)"}),e.jsx(P,{value:"UTC",children:"UTC (UTC+0)"}),e.jsx(P,{value:"America/New_York",children:"America/New_York (UTC-5)"})]})}),e.jsx(a.Item,{label:"语言",name:"language",rules:[{required:!0,message:"请选择语言"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"zh-CN",children:"简体中文"}),e.jsx(P,{value:"en-US",children:"English"})]})}),e.jsx(x,{children:"通知设置"}),e.jsx(a.Item,{label:"启用系统通知",name:"enableNotifications",valuePropName:"checked",children:e.jsx(u,{})})]})})},{key:"monitoring",label:"监控配置",children:e.jsx(a,{layout:"vertical",initialValues:{cpuThreshold:80,memoryThreshold:85,diskThreshold:90,networkThreshold:100,enableAutoScaling:!1,retentionDays:30},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"CPU告警阈值（%）",name:"cpuThreshold",rules:[{required:!0,message:"请输入CPU告警阈值"}],children:e.jsx(o,{min:1,max:100,style:{width:"100%"}})}),e.jsx(a.Item,{label:"内存告警阈值（%）",name:"memoryThreshold",rules:[{required:!0,message:"请输入内存告警阈值"}],children:e.jsx(o,{min:1,max:100,style:{width:"100%"}})}),e.jsx(a.Item,{label:"磁盘告警阈值（%）",name:"diskThreshold",rules:[{required:!0,message:"请输入磁盘告警阈值"}],children:e.jsx(o,{min:1,max:100,style:{width:"100%"}})}),e.jsx(a.Item,{label:"网络告警阈值（Mbps）",name:"networkThreshold",rules:[{required:!0,message:"请输入网络告警阈值"}],children:e.jsx(o,{min:1,max:1e3,style:{width:"100%"}})}),e.jsx(a.Item,{label:"数据保留天数",name:"retentionDays",rules:[{required:!0,message:"请输入数据保留天数"}],children:e.jsx(o,{min:1,max:365,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用自动扩缩容",name:"enableAutoScaling",valuePropName:"checked",children:e.jsx(u,{})})]})})},{key:"api",label:"API配置",children:e.jsx(a,{layout:"vertical",initialValues:{apiEndpoint:"http://localhost:8080/api",apiTimeout:30,enableApiAuth:!0,apiKey:""},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"API端点",name:"apiEndpoint",rules:[{required:!0,message:"请输入API端点"}],children:e.jsx(c,{placeholder:"请输入API端点URL"})}),e.jsx(a.Item,{label:"API超时时间（秒）",name:"apiTimeout",rules:[{required:!0,message:"请输入API超时时间"}],children:e.jsx(o,{min:5,max:300,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用API认证",name:"enableApiAuth",valuePropName:"checked",children:e.jsx(u,{})}),e.jsx(a.Item,{label:"API密钥",name:"apiKey",rules:[{required:!0,message:"请输入API密钥"}],children:e.jsx(c.Password,{placeholder:"请输入API密钥"})})]})})},{key:"database",label:"数据库配置",children:e.jsx(a,{layout:"vertical",initialValues:{dbHost:"localhost",dbPort:3306,dbName:"ai_monitor",dbUser:"root",dbPassword:"",dbPoolSize:10,enableSSL:!1},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"数据库主机",name:"dbHost",rules:[{required:!0,message:"请输入数据库主机地址"}],children:e.jsx(c,{placeholder:"请输入数据库主机地址"})}),e.jsx(a.Item,{label:"端口",name:"dbPort",rules:[{required:!0,message:"请输入数据库端口"}],children:e.jsx(o,{min:1,max:65535,style:{width:"100%"}})}),e.jsx(a.Item,{label:"数据库名称",name:"dbName",rules:[{required:!0,message:"请输入数据库名称"}],children:e.jsx(c,{placeholder:"请输入数据库名称"})}),e.jsx(a.Item,{label:"用户名",name:"dbUser",rules:[{required:!0,message:"请输入数据库用户名"}],children:e.jsx(c,{placeholder:"请输入数据库用户名"})}),e.jsx(a.Item,{label:"密码",name:"dbPassword",rules:[{required:!0,message:"请输入数据库密码"}],children:e.jsx(c.Password,{placeholder:"请输入数据库密码"})}),e.jsx(a.Item,{label:"连接池大小",name:"dbPoolSize",rules:[{required:!0,message:"请输入连接池大小"}],children:e.jsx(o,{min:1,max:100,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用SSL",name:"enableSSL",valuePropName:"checked",children:e.jsx(u,{})})]})})},{key:"redis",label:"Redis配置",children:e.jsx(a,{layout:"vertical",initialValues:{redisHost:"localhost",redisPort:6379,redisPassword:"",redisDb:0,redisTimeout:5e3,enableRedisCluster:!1},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"Redis主机",name:"redisHost",rules:[{required:!0,message:"请输入Redis主机地址"}],children:e.jsx(c,{placeholder:"请输入Redis主机地址"})}),e.jsx(a.Item,{label:"端口",name:"redisPort",rules:[{required:!0,message:"请输入Redis端口"}],children:e.jsx(o,{min:1,max:65535,style:{width:"100%"}})}),e.jsx(a.Item,{label:"密码",name:"redisPassword",children:e.jsx(c.Password,{placeholder:"请输入Redis密码（可选）"})}),e.jsx(a.Item,{label:"数据库索引",name:"redisDb",rules:[{required:!0,message:"请输入数据库索引"}],children:e.jsx(o,{min:0,max:15,style:{width:"100%"}})}),e.jsx(a.Item,{label:"连接超时（毫秒）",name:"redisTimeout",rules:[{required:!0,message:"请输入连接超时时间"}],children:e.jsx(o,{min:1e3,max:3e4,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用集群模式",name:"enableRedisCluster",valuePropName:"checked",children:e.jsx(u,{})})]})})},{key:"ai",label:"AI模型配置",children:e.jsx(a,{layout:"vertical",initialValues:{aiProvider:"openai",apiKey:"",modelName:"gpt-3.5-turbo",maxTokens:2048,temperature:.7,enableStreaming:!0,ollamaHost:"http://localhost:11434",ollamaTimeout:30},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"AI服务提供商",name:"aiProvider",rules:[{required:!0,message:"请选择AI服务提供商"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"openai",children:"OpenAI"}),e.jsx(P,{value:"azure",children:"Azure OpenAI"}),e.jsx(P,{value:"anthropic",children:"Anthropic"}),e.jsx(P,{value:"google",children:"Google AI"}),e.jsx(P,{value:"baidu",children:"百度文心"}),e.jsx(P,{value:"alibaba",children:"阿里通义"}),e.jsx(P,{value:"ollama",children:"本地Ollama"})]})}),e.jsx(a.Item,{dependencies:["aiProvider"],noStyle:!0,children:({getFieldValue:l})=>"ollama"!==l("aiProvider")?e.jsx(a.Item,{label:"API密钥",name:"apiKey",rules:[{required:!0,message:"请输入API密钥"}],children:e.jsx(c.Password,{placeholder:"请输入AI服务API密钥"})}):null}),e.jsx(a.Item,{dependencies:["aiProvider"],noStyle:!0,children:({getFieldValue:l})=>"ollama"===l("aiProvider")?e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{label:"Ollama服务器地址",name:"ollamaHost",rules:[{required:!0,message:"请输入Ollama服务器地址"}],children:e.jsx(c,{placeholder:"例如: http://localhost:11434"})}),e.jsx(a.Item,{label:"连接超时（秒）",name:"ollamaTimeout",rules:[{required:!0,message:"请输入连接超时时间"}],children:e.jsx(o,{min:5,max:300,style:{width:"100%"},placeholder:"默认30秒"})})]}):null}),e.jsx(a.Item,{label:"模型名称",name:"modelName",rules:[{required:!0,message:"请输入模型名称"}],children:e.jsx(c,{placeholder:"请输入模型名称"})}),e.jsx(a.Item,{label:"最大Token数",name:"maxTokens",rules:[{required:!0,message:"请输入最大Token数"}],children:e.jsx(o,{min:1,max:8192,style:{width:"100%"}})}),e.jsx(a.Item,{label:"温度参数",name:"temperature",rules:[{required:!0,message:"请输入温度参数"}],children:e.jsx(o,{min:0,max:2,step:.1,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用流式输出",name:"enableStreaming",valuePropName:"checked",children:e.jsx(u,{})})]})})},{key:"users",label:"用户管理",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(i,{type:"primary",icon:e.jsx(j,{}),onClick:()=>C(!0),children:"添加用户"})}),e.jsx(b,{dataSource:U,columns:[{title:"用户名",dataIndex:"username",key:"username"},{title:"邮箱",dataIndex:"email",key:"email"},{title:"角色",dataIndex:"role",key:"role",render:l=>e.jsx(p,{color:"admin"===l?"red":"blue",children:"admin"===l?"管理员":"普通用户"})},{title:"状态",dataIndex:"status",key:"status",render:l=>e.jsx(p,{color:"active"===l?"green":"default",children:"active"===l?"激活":"禁用"})},{title:"操作",key:"action",render:(l,s)=>e.jsxs(r,{children:[e.jsx(i,{type:"link",icon:e.jsx(g,{}),onClick:()=>{F(s),C(!0)},children:"编辑"}),e.jsx(i,{type:"link",danger:!0,icon:e.jsx(y,{}),onClick:()=>{},children:"删除"})]})}],pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}})]})},{key:"alerts",label:"告警配置",children:e.jsx(a,{layout:"vertical",initialValues:{emailEnabled:!1,smsEnabled:!1,emailSmtpHost:"smtp.gmail.com",emailSmtpPort:587,emailUsername:"",emailPassword:"",emailFrom:"",emailTo:"",smsProvider:"aliyun",smsAccessKey:"",smsSecretKey:"",smsSignName:"",smsTemplateCode:"",smsPhoneNumbers:""},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(x,{orientation:"left",children:"邮件告警配置"}),e.jsx(a.Item,{label:"启用邮件告警",name:"emailEnabled",valuePropName:"checked",children:e.jsx(u,{})}),e.jsx(a.Item,{dependencies:["emailEnabled"],noStyle:!0,children:({getFieldValue:l})=>l("emailEnabled")?e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{label:"SMTP服务器地址",name:"emailSmtpHost",rules:[{required:!0,message:"请输入SMTP服务器地址"}],children:e.jsx(c,{placeholder:"例如: smtp.gmail.com"})}),e.jsx(a.Item,{label:"SMTP端口",name:"emailSmtpPort",rules:[{required:!0,message:"请输入SMTP端口"}],children:e.jsx(o,{min:1,max:65535,style:{width:"100%"},placeholder:"例如: 587"})}),e.jsx(a.Item,{label:"邮箱用户名",name:"emailUsername",rules:[{required:!0,message:"请输入邮箱用户名"}],children:e.jsx(c,{placeholder:"请输入邮箱用户名"})}),e.jsx(a.Item,{label:"邮箱密码/授权码",name:"emailPassword",rules:[{required:!0,message:"请输入邮箱密码或授权码"}],children:e.jsx(c.Password,{placeholder:"请输入邮箱密码或授权码"})}),e.jsx(a.Item,{label:"发件人邮箱",name:"emailFrom",rules:[{required:!0,message:"请输入发件人邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(c,{placeholder:"例如: monitor@company.com"})}),e.jsx(a.Item,{label:"收件人邮箱",name:"emailTo",rules:[{required:!0,message:"请输入收件人邮箱"}],extra:"多个邮箱请用英文逗号分隔，例如: admin@company.com,ops@company.com",children:e.jsx(q,{rows:3,placeholder:"请输入收件人邮箱地址，多个邮箱用逗号分隔"})})]}):null}),e.jsx(x,{orientation:"left",children:"短信告警配置"}),e.jsx(a.Item,{label:"启用短信告警",name:"smsEnabled",valuePropName:"checked",children:e.jsx(u,{})}),e.jsx(a.Item,{dependencies:["smsEnabled"],noStyle:!0,children:({getFieldValue:l})=>l("smsEnabled")?e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{label:"短信服务商",name:"smsProvider",rules:[{required:!0,message:"请选择短信服务商"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"aliyun",children:"阿里云短信"}),e.jsx(P,{value:"tencent",children:"腾讯云短信"}),e.jsx(P,{value:"huawei",children:"华为云短信"}),e.jsx(P,{value:"baidu",children:"百度云短信"})]})}),e.jsx(a.Item,{label:"Access Key ID",name:"smsAccessKey",rules:[{required:!0,message:"请输入Access Key ID"}],children:e.jsx(c,{placeholder:"请输入短信服务商的Access Key ID"})}),e.jsx(a.Item,{label:"Access Key Secret",name:"smsSecretKey",rules:[{required:!0,message:"请输入Access Key Secret"}],children:e.jsx(c.Password,{placeholder:"请输入短信服务商的Access Key Secret"})}),e.jsx(a.Item,{label:"短信签名",name:"smsSignName",rules:[{required:!0,message:"请输入短信签名"}],children:e.jsx(c,{placeholder:"例如: 监控系统"})}),e.jsx(a.Item,{label:"短信模板代码",name:"smsTemplateCode",rules:[{required:!0,message:"请输入短信模板代码"}],children:e.jsx(c,{placeholder:"例如: SMS_123456789"})}),e.jsx(a.Item,{label:"接收手机号",name:"smsPhoneNumbers",rules:[{required:!0,message:"请输入接收手机号"}],extra:"多个手机号请用英文逗号分隔，例如: 13800138000,13900139000",children:e.jsx(q,{rows:3,placeholder:"请输入接收告警短信的手机号，多个手机号用逗号分隔"})})]}):null}),e.jsx(a.Item,{children:e.jsxs(r,{children:[e.jsx(i,{type:"primary",htmlType:"submit",children:"保存配置"}),e.jsx(i,{onClick:()=>{I.info("正在发送测试邮件...")},children:"测试邮件"}),e.jsx(i,{onClick:()=>{I.info("正在发送测试短信...")},children:"测试短信"})]})})]})})},{key:"advanced",label:"高级设置",children:e.jsx(a,{layout:"vertical",initialValues:{enableDebugMode:!1,logLevel:"info",maxConcurrentRequests:100,enableCaching:!0,customConfig:""},children:e.jsxs("div",{style:{maxWidth:600},children:[e.jsx(a.Item,{label:"启用调试模式",name:"enableDebugMode",valuePropName:"checked",children:e.jsx(u,{})}),e.jsx(a.Item,{label:"日志级别",name:"logLevel",rules:[{required:!0,message:"请选择日志级别"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"debug",children:"Debug"}),e.jsx(P,{value:"info",children:"Info"}),e.jsx(P,{value:"warn",children:"Warning"}),e.jsx(P,{value:"error",children:"Error"})]})}),e.jsx(a.Item,{label:"最大并发请求数",name:"maxConcurrentRequests",rules:[{required:!0,message:"请输入最大并发请求数"}],children:e.jsx(o,{min:1,max:1e3,style:{width:"100%"}})}),e.jsx(a.Item,{label:"启用缓存",name:"enableCaching",valuePropName:"checked",children:e.jsx(u,{})}),e.jsx(a.Item,{label:"自定义配置",name:"customConfig",children:e.jsx(q,{rows:6,placeholder:"请输入JSON格式的自定义配置"})})]})})}]})})]}),e.jsx(v,{title:f?"编辑用户":"添加用户",open:N,onCancel:()=>{C(!1),F(null),K.resetFields()},onOk:()=>{K.submit()},children:e.jsxs(a,{form:K,layout:"vertical",onFinish:e=>{console.log("User form values:",e),C(!1),F(null),K.resetFields()},initialValues:f||{username:"",email:"",role:"user",status:"active"},children:[e.jsx(a.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(c,{placeholder:"请输入用户名"})}),e.jsx(a.Item,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(c,{placeholder:"请输入邮箱"})}),e.jsx(a.Item,{label:"密码",name:"password",rules:[{required:!f,message:"请输入密码"}],children:e.jsx(c.Password,{placeholder:f?"留空则不修改密码":"请输入密码"})}),e.jsx(a.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"admin",children:"管理员"}),e.jsx(P,{value:"user",children:"普通用户"})]})}),e.jsx(a.Item,{label:"状态",name:"status",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(h,{children:[e.jsx(P,{value:"active",children:"激活"}),e.jsx(P,{value:"inactive",children:"禁用"})]})})]})})]})};export{S as default};
