import{j as e,H as t}from"./index-BqT3aLp1.js";import{r as i}from"./vendor-CZIWcOcD.js";import{i as a}from"./charts-BRUDwXyH.js";import{d as s,S as r,U as n,B as d,a3 as c,V as l,a9 as o,w as m,W as x,X as h,H as u,a as p,a1 as y,b as f,$ as j,aa as g,a2 as v}from"./antd-B8UvalbT.js";const{Option:w}=n,{RangePicker:S}=v,{TabPane:I}=p,Y=()=>{const[v,S]=i.useState("overview"),[Y,b]=i.useState(!1),[k,z]=i.useState("all"),[M,D]=i.useState("24h"),C=[{id:"1",type:"anomaly",title:"CPU使用率异常波动检测",description:"检测到服务器web-01在过去2小时内CPU使用率出现异常波动，与历史模式不符",confidence:92,severity:"high",timestamp:s().subtract(30,"minute").format("YYYY-MM-DD HH:mm:ss"),metrics:["cpu_usage","load_average"],recommendations:["检查是否有异常进程占用CPU资源","考虑增加服务器资源或负载均衡","设置CPU使用率告警阈值"]},{id:"2",type:"prediction",title:"内存使用率增长趋势预测",description:"基于历史数据分析，预测未来7天内存使用率将持续增长，可能在5天后达到临界值",confidence:87,severity:"medium",timestamp:s().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss"),metrics:["memory_usage","memory_available"],recommendations:["提前规划内存扩容","优化应用程序内存使用","清理不必要的缓存数据"]},{id:"3",type:"optimization",title:"数据库性能优化建议",description:"AI分析发现数据库查询响应时间在特定时段显著增加，建议优化查询语句和索引",confidence:78,severity:"medium",timestamp:s().subtract(2,"hour").format("YYYY-MM-DD HH:mm:ss"),metrics:["db_response_time","db_connections"],recommendations:["优化慢查询语句","添加必要的数据库索引","考虑数据库连接池优化"]},{id:"4",type:"trend",title:"网络流量趋势分析",description:"网络流量呈现周期性变化模式，峰值时段集中在工作日9-11点和14-16点",confidence:95,severity:"low",timestamp:s().subtract(3,"hour").format("YYYY-MM-DD HH:mm:ss"),metrics:["network_in","network_out"],recommendations:["根据流量模式调整资源分配","在高峰期前预先扩容","考虑CDN加速优化"]}],H=[{id:"1",metric:"CPU使用率",value:95.2,expectedRange:[20,70],anomalyScore:.92,timestamp:s().subtract(15,"minute").format("YYYY-MM-DD HH:mm:ss"),status:"active"},{id:"2",metric:"内存使用率",value:88.7,expectedRange:[30,80],anomalyScore:.76,timestamp:s().subtract(25,"minute").format("YYYY-MM-DD HH:mm:ss"),status:"active"},{id:"3",metric:"磁盘IO",value:156.3,expectedRange:[50,120],anomalyScore:.68,timestamp:s().subtract(45,"minute").format("YYYY-MM-DD HH:mm:ss"),status:"resolved"}],N=[{title:"分析类型",dataIndex:"type",key:"type",render:t=>{const{color:i,text:a}={anomaly:{color:"red",text:"异常检测"},prediction:{color:"blue",text:"趋势预测"},optimization:{color:"green",text:"优化建议"},trend:{color:"purple",text:"趋势分析"}}[t];return e.jsx(f,{color:i,children:a})}},{title:"分析结果",key:"result",render:t=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:t.title}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:t.description})]})},{title:"置信度",dataIndex:"confidence",key:"confidence",render:t=>e.jsx("div",{style:{width:"80px"},children:e.jsx(j,{percent:t,size:"small",strokeColor:t>80?"#52c41a":t>60?"#faad14":"#ff4d4f",format:e=>`${e}%`})})},{title:"严重程度",dataIndex:"severity",key:"severity",render:t=>e.jsx(f,{color:{high:"red",medium:"orange",low:"green"}[t],children:{high:"高",medium:"中",low:"低"}[t]})},{title:"分析时间",dataIndex:"timestamp",key:"timestamp"},{title:"操作",key:"actions",render:t=>e.jsx(r,{children:e.jsx(d,{size:"small",icon:e.jsx(g,{}),children:"详情"})})}],V=[{title:"监控指标",dataIndex:"metric",key:"metric"},{title:"当前值",dataIndex:"value",key:"value",render:e=>e.toFixed(1)},{title:"正常范围",dataIndex:"expectedRange",key:"expectedRange",render:e=>`${e[0]} - ${e[1]}`},{title:"异常分数",dataIndex:"anomalyScore",key:"anomalyScore",render:t=>e.jsx("div",{style:{width:"80px"},children:e.jsx(j,{percent:100*t,size:"small",strokeColor:t>.8?"#ff4d4f":t>.6?"#faad14":"#52c41a",format:e=>`${(e/100).toFixed(2)}`})})},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(f,{color:"active"===t?"red":"green",children:"active"===t?"活跃":"已解决"})},{title:"检测时间",dataIndex:"timestamp",key:"timestamp"}],A=[{title:"监控指标",dataIndex:"metric",key:"metric"},{title:"当前值",dataIndex:"currentValue",key:"currentValue",render:e=>e.toFixed(1)},{title:"预测值",dataIndex:"predictedValue",key:"predictedValue",render:e=>e.toFixed(1)},{title:"趋势",dataIndex:"trend",key:"trend",render:t=>{const{color:i,text:a,icon:s}={increasing:{color:"red",text:"上升",icon:"↗"},decreasing:{color:"green",text:"下降",icon:"↘"},stable:{color:"blue",text:"稳定",icon:"→"}}[t];return e.jsxs(f,{color:i,children:[s," ",a]})}},{title:"置信度",dataIndex:"confidence",key:"confidence",render:e=>`${e}%`},{title:"时间范围",dataIndex:"timeframe",key:"timeframe"}];return i.useEffect(()=>{if("overview"===v){const e=a(document.getElementById("ai-trend-chart")),t={title:{text:"AI分析趋势",textStyle:{fontSize:16}},tooltip:{trigger:"axis"},legend:{data:["异常检测","趋势预测","优化建议"]},xAxis:{type:"category",data:Array.from({length:7},(e,t)=>s().subtract(6-t,"day").format("MM-DD"))},yAxis:{type:"value",name:"分析次数"},series:[{name:"异常检测",type:"line",data:[12,8,15,20,18,25,22],smooth:!0,lineStyle:{color:"#ff4d4f"}},{name:"趋势预测",type:"line",data:[5,7,9,12,10,15,18],smooth:!0,lineStyle:{color:"#1890ff"}},{name:"优化建议",type:"line",data:[3,4,6,8,7,10,12],smooth:!0,lineStyle:{color:"#52c41a"}}]};e.setOption(t);const i=a(document.getElementById("anomaly-chart")),r={title:{text:"异常分数分布",textStyle:{fontSize:16}},tooltip:{trigger:"item"},series:[{type:"pie",radius:["40%","70%"],data:[{value:35,name:"高异常 (>0.8)",itemStyle:{color:"#ff4d4f"}},{value:25,name:"中异常 (0.6-0.8)",itemStyle:{color:"#faad14"}},{value:20,name:"低异常 (0.4-0.6)",itemStyle:{color:"#1890ff"}},{value:20,name:"正常 (<0.4)",itemStyle:{color:"#52c41a"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(r);const n=()=>{e.resize(),i.resize()};return window.addEventListener("resize",n),()=>{e.dispose(),i.dispose(),window.removeEventListener("resize",n)}}},[v]),e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx("title",{children:"AI分析 - AI Monitor System"}),e.jsx("meta",{name:"description",content:"AI智能分析和异常检测"})]}),e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"AI智能分析"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"基于机器学习的智能监控分析和预测"})]}),e.jsxs(r,{children:[e.jsxs(n,{value:M,onChange:D,style:{width:120},children:[e.jsx(w,{value:"1h",children:"最近1小时"}),e.jsx(w,{value:"24h",children:"最近24小时"}),e.jsx(w,{value:"7d",children:"最近7天"}),e.jsx(w,{value:"30d",children:"最近30天"})]}),e.jsx(d,{icon:e.jsx(c,{}),children:"导出报告"}),e.jsx(d,{icon:e.jsx(l,{}),loading:Y,onClick:()=>{b(!0),setTimeout(()=>{b(!1)},2e3)},children:"重新分析"})]})]}),e.jsx(o,{message:"AI分析引擎状态正常",description:"当前使用GPT-4模型进行智能分析，分析准确率达到89.5%，建议置信度阈值设置为80%以上",type:"success",icon:e.jsx(m,{}),showIcon:!0,className:"mb-24"}),e.jsxs(x,{gutter:[16,16],className:"mb-24",children:[e.jsx(h,{xs:24,sm:6,children:e.jsxs(u,{className:"card-shadow text-center",children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:600,color:"#ff4d4f"},children:H.filter(e=>"active"===e.status).length}),e.jsx("div",{style:{color:"#666"},children:"活跃异常"})]})}),e.jsx(h,{xs:24,sm:6,children:e.jsxs(u,{className:"card-shadow text-center",children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:600,color:"#1890ff"},children:C.filter(e=>"prediction"===e.type).length}),e.jsx("div",{style:{color:"#666"},children:"预测分析"})]})}),e.jsx(h,{xs:24,sm:6,children:e.jsxs(u,{className:"card-shadow text-center",children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:600,color:"#52c41a"},children:C.filter(e=>"optimization"===e.type).length}),e.jsx("div",{style:{color:"#666"},children:"优化建议"})]})}),e.jsx(h,{xs:24,sm:6,children:e.jsxs(u,{className:"card-shadow text-center",children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:600,color:"#722ed1"},children:Math.round(C.reduce((e,t)=>e+t.confidence,0)/C.length)}),e.jsx("div",{style:{color:"#666"},children:"平均置信度(%)"})]})})]}),e.jsxs(p,{activeKey:v,onChange:S,children:[e.jsx(I,{tab:"分析概览",children:e.jsxs(x,{gutter:[16,16],children:[e.jsx(h,{xs:24,lg:12,children:e.jsx(u,{title:"AI分析趋势",className:"card-shadow",children:e.jsx("div",{id:"ai-trend-chart",style:{height:"300px"}})})}),e.jsx(h,{xs:24,lg:12,children:e.jsx(u,{title:"异常分数分布",className:"card-shadow",children:e.jsx("div",{id:"anomaly-chart",style:{height:"300px"}})})})]})},"overview"),e.jsx(I,{tab:"分析结果",children:e.jsxs(u,{className:"card-shadow",children:[e.jsx("div",{className:"mb-16",children:e.jsxs(n,{value:k,onChange:z,style:{width:150},children:[e.jsx(w,{value:"all",children:"全部类型"}),e.jsx(w,{value:"anomaly",children:"异常检测"}),e.jsx(w,{value:"prediction",children:"趋势预测"}),e.jsx(w,{value:"optimization",children:"优化建议"}),e.jsx(w,{value:"trend",children:"趋势分析"})]})}),e.jsx(y,{dataSource:C.filter(e=>"all"===k||e.type===k),columns:N,rowKey:"id",loading:Y,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条分析结果`}})]})},"results"),e.jsx(I,{tab:"异常检测",children:e.jsx(u,{className:"card-shadow",children:e.jsx(y,{dataSource:H,columns:V,rowKey:"id",loading:Y,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条异常记录`}})})},"anomaly"),e.jsx(I,{tab:"性能预测",children:e.jsx(u,{className:"card-shadow",children:e.jsx(y,{dataSource:[{metric:"CPU使用率",currentValue:65.2,predictedValue:78.5,trend:"increasing",confidence:89,timeframe:"未来24小时"},{metric:"内存使用率",currentValue:72.8,predictedValue:85.3,trend:"increasing",confidence:92,timeframe:"未来7天"},{metric:"磁盘使用率",currentValue:45.6,predictedValue:48.2,trend:"increasing",confidence:76,timeframe:"未来30天"},{metric:"网络延迟",currentValue:25.4,predictedValue:23.1,trend:"decreasing",confidence:82,timeframe:"未来24小时"}],columns:A,rowKey:"metric",loading:Y,pagination:!1})})},"prediction")]})]})]})};export{Y as default};
