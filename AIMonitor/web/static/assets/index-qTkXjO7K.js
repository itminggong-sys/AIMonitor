import{j as e}from"./index-DIu9wXaB.js";import{j as t,u as n,r as s}from"./vendor-D6r2_tUy.js";import{J as i,S as o,h as a,T as r,b as l,g as c,aI as d,ad as g,Q as p,i as m,U as x,aJ as u,B as h,aK as j}from"./antd-C8aMnYDz.js";const{Title:f,Paragraph:k,Text:v,Link:y}=r,{Step:A}=d,b=({agentType:t,title:n,description:s,requirements:r,steps:x,configuration:u,troubleshooting:h})=>e.jsxs("div",{className:"install-guide-container",children:[e.jsxs(i,{className:"install-guide-header",children:[e.jsxs(o,{align:"center",className:"header-content",children:[e.jsx("div",{className:"agent-icon",children:e.jsx(a,{style:{fontSize:"32px",color:"#52c41a"}})}),e.jsxs("div",{children:[e.jsx(f,{level:2,style:{margin:0},children:n}),e.jsx(l,{color:"blue",style:{marginTop:"8px"},children:t.toUpperCase()})]})]}),e.jsx(k,{style:{marginTop:"16px",fontSize:"16px"},children:s})]}),e.jsx(i,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{})," 系统要求"]}),className:"requirements-card",children:e.jsx("ul",{className:"requirements-list",children:r.map((t,n)=>e.jsxs("li",{children:[e.jsx(a,{style:{color:"#52c41a",marginRight:"8px"}}),t]},n))})}),e.jsx(i,{title:"📋 安装步骤",className:"steps-card",children:e.jsx(d,{direction:"vertical",size:"small",children:x.map((t,n)=>e.jsx(A,{title:e.jsx(v,{strong:!0,children:t.title}),description:e.jsxs("div",{className:"step-content",children:[e.jsx(k,{children:t.description}),t.code&&e.jsx("div",{className:"code-block",children:e.jsx("pre",{children:e.jsx("code",{children:t.code})})}),t.note&&e.jsx(g,{message:t.note,type:"info",showIcon:!0,style:{marginTop:"8px"}})]}),status:"process"},n))})}),u&&e.jsxs(i,{title:"⚙️ 配置说明",className:"config-card",children:[e.jsx(f,{level:4,children:u.title}),e.jsx(k,{children:u.content}),u.example&&e.jsxs("div",{children:[e.jsx(v,{strong:!0,children:"配置示例："}),e.jsx("div",{className:"code-block",children:e.jsx("pre",{children:e.jsx("code",{children:u.example})})})]})]}),h&&h.length>0&&e.jsx(i,{title:e.jsxs(e.Fragment,{children:[e.jsx(m,{})," 常见问题"]}),className:"troubleshooting-card",children:h.map((t,n)=>e.jsxs("div",{className:"troubleshooting-item",children:[e.jsxs(f,{level:5,style:{color:"#fa8c16"},children:["问题：",t.issue]}),e.jsxs(k,{children:[e.jsx(v,{strong:!0,children:"解决方案："}),t.solution]}),n<h.length-1&&e.jsx(p,{})]},n))}),e.jsx(i,{className:"footer-card",children:e.jsx(g,{message:"需要帮助？",description:e.jsxs("div",{children:["如果在安装过程中遇到问题，请查看我们的"," ",e.jsx(y,{href:"/docs",target:"_blank",children:"详细文档"})," ","或联系技术支持。"]}),type:"success",showIcon:!0})})]}),w=()=>{const{agentType:i}=t(),o=n(),[a,r]=s.useState(!0),[l,c]=s.useState(null),[d,g]=s.useState(null);s.useEffect(()=>{(async()=>{if(!i)return g("Agent类型参数缺失"),void r(!1);try{const e=await fetch(`/api/v1/agents/install-guide/${i}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.text(),n=p(t,i);c(n)}catch(e){console.error("获取安装指南失败:",e),g("获取安装指南失败，请稍后重试")}finally{r(!1)}})()},[i]);const p=(e,t)=>({windows:{agentType:"windows",title:"Windows Agent 安装指南",description:"在Windows系统上安装和配置AI Monitor Agent，用于监控系统性能、进程状态和资源使用情况。",requirements:["Windows 10 或更高版本","至少 100MB 可用磁盘空间","管理员权限",".NET Framework 4.7.2 或更高版本"],steps:[{title:"下载Agent安装包",description:"从官方网站下载最新版本的Windows Agent安装包。",code:'# 下载命令\nInvoke-WebRequest -Uri "https://releases.aimonitor.com/windows/latest.zip" -OutFile "aimonitor-agent.zip"'},{title:"解压安装包",description:"将下载的ZIP文件解压到目标目录。",code:'Expand-Archive -Path "aimonitor-agent.zip" -DestinationPath "C:\\Program Files\\AIMonitor"'},{title:"配置Agent",description:"编辑配置文件，设置监控服务器地址和认证信息。",note:"请确保配置文件中的服务器地址正确，否则Agent无法正常连接。"},{title:"安装服务",description:"以管理员身份运行安装脚本，将Agent注册为Windows服务。",code:".\\install-service.bat"},{title:"启动服务",description:"启动AI Monitor Agent服务。",code:'Start-Service "AIMonitor Agent"'}],configuration:{title:"Agent配置文件说明",content:"配置文件位于安装目录下的config.yaml，包含服务器连接、监控项目和日志设置。",example:'server:\n  host: "your-monitor-server.com"\n  port: 8080\n  token: "your-auth-token"\n\nmonitoring:\n  interval: 30s\n  metrics:\n    - cpu\n    - memory\n    - disk\n    - network\n\nlogging:\n  level: info\n  file: "logs/agent.log"'},troubleshooting:[{issue:"服务启动失败",solution:"检查配置文件格式是否正确，确保有管理员权限，查看Windows事件日志获取详细错误信息。"},{issue:"无法连接到监控服务器",solution:"验证网络连接，检查防火墙设置，确认服务器地址和端口配置正确。"}]},linux:{agentType:"linux",title:"Linux Agent 安装指南",description:"在Linux系统上安装和配置AI Monitor Agent，支持主流Linux发行版。",requirements:["Linux内核版本 3.10 或更高","至少 100MB 可用磁盘空间","root权限或sudo访问权限","systemd支持（推荐）"],steps:[{title:"下载安装包",description:"使用wget或curl下载Linux Agent安装包。",code:"wget https://releases.aimonitor.com/linux/aimonitor-agent-latest.tar.gz"},{title:"解压安装包",description:"解压下载的tar.gz文件。",code:"tar -xzf aimonitor-agent-latest.tar.gz\ncd aimonitor-agent"},{title:"运行安装脚本",description:"执行安装脚本，自动完成Agent的安装和配置。",code:"sudo ./install.sh",note:"安装脚本会自动检测系统类型并选择合适的安装方式。"},{title:"配置Agent",description:"编辑配置文件，设置监控参数。",code:"sudo nano /etc/aimonitor/config.yaml"},{title:"启动服务",description:"启动并启用AI Monitor Agent服务。",code:"sudo systemctl start aimonitor-agent\nsudo systemctl enable aimonitor-agent"}],configuration:{title:"Linux Agent配置",content:"配置文件位于/etc/aimonitor/config.yaml，包含完整的监控和连接设置。",example:'server:\n  endpoint: "https://your-server.com:8080"\n  api_key: "your-api-key"\n\nmonitoring:\n  system:\n    enabled: true\n    interval: "30s"\n  processes:\n    enabled: true\n    whitelist: ["nginx", "mysql", "redis"]\n\nlogging:\n  level: "info"\n  file: "/var/log/aimonitor/agent.log"\n  max_size: "100MB"'},troubleshooting:[{issue:"权限不足错误",solution:"确保使用sudo运行安装脚本，检查/etc/aimonitor目录的权限设置。"},{issue:"systemd服务无法启动",solution:"检查服务文件是否正确安装，使用journalctl -u aimonitor-agent查看详细日志。"}]},kafka:{agentType:"kafka",title:"Kafka Agent 安装指南",description:"监控Apache Kafka集群的性能指标、主题状态、消费者组延迟等关键信息。",requirements:["Kafka 2.0 或更高版本","Java 8 或更高版本","JMX端口访问权限","网络连接到Kafka集群"],steps:[{title:"下载Kafka Agent",description:"获取专用的Kafka监控Agent。",code:"wget https://releases.aimonitor.com/kafka/kafka-agent-latest.jar"},{title:"配置Kafka连接",description:"创建Kafka连接配置文件。",code:"cat > kafka-config.properties << EOF\nbootstrap.servers=localhost:9092\njmx.port=9999\nEOF"},{title:"启动Agent",description:"使用Java运行Kafka Agent。",code:"java -jar kafka-agent-latest.jar --config kafka-config.properties",note:"确保Kafka集群已启用JMX监控端口。"}],configuration:{title:"Kafka监控配置",content:"Kafka Agent支持监控多个集群，可配置主题、分区、消费者组等监控项。",example:'kafka:\n  clusters:\n    - name: "production"\n      bootstrap_servers: ["kafka1:9092", "kafka2:9092"]\n      jmx_port: 9999\n    - name: "staging"\n      bootstrap_servers: ["kafka-staging:9092"]\n      jmx_port: 9999\n\nmonitoring:\n  topics: ["user-events", "order-events"]\n  consumer_groups: ["analytics-group", "notification-group"]\n  metrics_interval: 30s'},troubleshooting:[{issue:"JMX连接失败",solution:"检查Kafka服务器的JMX配置，确保端口开放且无防火墙阻拦。"},{issue:"无法获取消费者组信息",solution:"验证Agent有足够权限访问Kafka集群，检查ACL配置。"}]}}[t]||{agentType:t,title:`${t.toUpperCase()} Agent 安装指南`,description:`${t}监控Agent的安装和配置指南。`,requirements:["系统要求待补充"],steps:[{title:"下载Agent",description:"从官方渠道下载对应的Agent安装包。"},{title:"安装配置",description:"按照系统要求进行安装和基础配置。"},{title:"启动服务",description:"启动监控服务并验证运行状态。"}]});return a?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(x,{size:"large",tip:"加载安装指南中..."})}):d||!l?e.jsx(u,{status:"error",title:"加载失败",subTitle:d||"未找到对应的安装指南",extra:e.jsx(h,{type:"primary",icon:e.jsx(j,{}),onClick:()=>o(-1),children:"返回上一页"})}):e.jsxs("div",{children:[e.jsx("div",{style:{position:"fixed",top:"20px",left:"20px",zIndex:1e3},children:e.jsx(h,{icon:e.jsx(j,{}),onClick:()=>o(-1),style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid #d9d9d9",borderRadius:"6px"},children:"返回"})}),e.jsx(b,{...l})]})};export{w as default};
