import{j as e}from"./index-C5TimlJq.js";import{j as t,u as n,r as i}from"./vendor-D6r2_tUy.js";import{J as s,S as o,h as a,T as r,b as l,g as c,aI as d,ad as g,Q as u,i as p,U as m,aJ as x,B as h,aK as j}from"./antd-C8aMnYDz.js";const{Title:f,Paragraph:v,Text:k,Link:A}=r,{Step:y}=d,w=({agentType:t,title:n,description:i,requirements:r,steps:m,configuration:x,troubleshooting:h})=>e.jsxs("div",{className:"install-guide-container",children:[e.jsxs(s,{className:"install-guide-header",children:[e.jsxs(o,{align:"center",className:"header-content",children:[e.jsx("div",{className:"agent-icon",children:e.jsx(a,{style:{fontSize:"32px",color:"#52c41a"}})}),e.jsxs("div",{children:[e.jsx(f,{level:2,style:{margin:0},children:n}),e.jsx(l,{color:"blue",style:{marginTop:"8px"},children:t.toUpperCase()})]})]}),e.jsx(v,{style:{marginTop:"16px",fontSize:"16px"},children:i})]}),e.jsx(s,{title:e.jsxs(e.Fragment,{children:[e.jsx(c,{})," 系统要求"]}),className:"requirements-card",children:e.jsx("ul",{className:"requirements-list",children:r.map((t,n)=>e.jsxs("li",{children:[e.jsx(a,{style:{color:"#52c41a",marginRight:"8px"}}),t]},n))})}),e.jsx(s,{title:"📋 安装步骤",className:"steps-card",children:e.jsx(d,{direction:"vertical",size:"small",children:m.map((t,n)=>e.jsx(y,{title:e.jsx(k,{strong:!0,children:t.title}),description:e.jsxs("div",{className:"step-content",children:[e.jsx(v,{children:t.description}),t.code&&e.jsx("div",{className:"code-block",children:e.jsx("pre",{children:e.jsx("code",{children:t.code})})}),t.note&&e.jsx(g,{message:t.note,type:"info",showIcon:!0,style:{marginTop:"8px"}})]}),status:"process"},n))})}),x&&e.jsxs(s,{title:"⚙️ 配置说明",className:"config-card",children:[e.jsx(f,{level:4,children:x.title}),e.jsx(v,{children:x.content}),x.example&&e.jsxs("div",{children:[e.jsx(k,{strong:!0,children:"配置示例："}),e.jsx("div",{className:"code-block",children:e.jsx("pre",{children:e.jsx("code",{children:x.example})})})]})]}),h&&h.length>0&&e.jsx(s,{title:e.jsxs(e.Fragment,{children:[e.jsx(p,{})," 常见问题"]}),className:"troubleshooting-card",children:h.map((t,n)=>e.jsxs("div",{className:"troubleshooting-item",children:[e.jsxs(f,{level:5,style:{color:"#fa8c16"},children:["问题：",t.issue]}),e.jsxs(v,{children:[e.jsx(k,{strong:!0,children:"解决方案："}),t.solution]}),n<h.length-1&&e.jsx(u,{})]},n))}),e.jsx(s,{className:"footer-card",children:e.jsx(g,{message:"需要帮助？",description:e.jsxs("div",{children:["如果在安装过程中遇到问题，请查看我们的"," ",e.jsx(A,{href:"/docs",target:"_blank",children:"详细文档"})," ","或联系技术支持。"]}),type:"success",showIcon:!0})})]}),b=()=>{const{agentType:s}=t(),o=n(),[a,r]=i.useState(!0),[l,c]=i.useState(null),[d,g]=i.useState(null);i.useEffect(()=>{(async()=>{if(!s)return g("Agent类型参数缺失"),void r(!1);try{const e=await fetch(`/api/v1/agents/install-guide/${s}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json(),n=A(t,s);c(n)}catch(e){console.error("获取安装指南失败:",e),g("获取安装指南失败，请稍后重试")}finally{r(!1)}})()},[s]);const u=(e,t,n)=>{var i;return(null==(i={windows:["从官方网站或内部仓库下载最新版本的Windows Agent安装包。","将下载的安装包解压到指定目录，建议使用C:\\Program Files\\AIMonitor。","根据您的环境配置Agent连接参数，包括服务器地址、端口和认证信息。","以管理员权限运行安装脚本，将Agent注册为Windows系统服务。","启动服务并验证Agent是否正常运行，检查日志文件确认连接状态。"],linux:["使用wget或curl命令下载Linux版本的Agent安装包。","解压tar.gz文件到目标目录，通常为/opt/aimonitor。","编辑配置文件，设置监控服务器连接信息和监控项目。","运行安装脚本，自动配置systemd服务和权限设置。","启动并启用服务，确保系统重启后自动运行。"]}[e])?void 0:i[t])||"请按照步骤说明进行操作。"},p=(e,t,n)=>{var i;return null==(i={windows:['Invoke-WebRequest -Uri "https://releases.aimonitor.com/windows/latest.zip" -OutFile "aimonitor-agent.zip"','Expand-Archive -Path "aimonitor-agent.zip" -DestinationPath "C:\\Program Files\\AIMonitor"',void 0,".\\install-service.bat",'Start-Service "AIMonitor Agent"\nGet-Service "AIMonitor Agent"'],linux:["wget https://releases.aimonitor.com/linux/aimonitor-agent-latest.tar.gz","tar -xzf aimonitor-agent-latest.tar.gz\ncd aimonitor-agent","sudo nano /etc/aimonitor/config.yaml","sudo ./install.sh","sudo systemctl start aimonitor-agent\nsudo systemctl enable aimonitor-agent\nsudo systemctl status aimonitor-agent"]}[e])?void 0:i[t]},f=(e,t)=>{var n;return null==(n={windows:[void 0,"请确保目标目录有足够的磁盘空间，建议至少100MB。","配置文件中的服务器地址必须是Agent能够访问的地址。",'安装过程需要管理员权限，请右键选择"以管理员身份运行"。',void 0],linux:["如果网络受限，可以先下载到本地再传输到目标服务器。",void 0,"配置文件的权限应设置为600，确保安全性。","安装脚本会自动检测系统类型并选择合适的安装方式。","如果启动失败，请检查日志文件/var/log/aimonitor/agent.log。"]}[e])?void 0:n[t]},v=e=>{const t=[];return Object.entries(e).forEach(([e,n])=>{"string"==typeof n?t.push(`${e}: "${n}"`):t.push(`${e}: ${n}`)}),t.join("\n")},k=e=>({windows:[{issue:"服务启动失败",solution:"检查配置文件格式是否正确，确保有管理员权限，查看Windows事件日志获取详细错误信息。"},{issue:"无法连接到监控服务器",solution:"验证网络连接，检查防火墙设置，确认服务器地址和端口配置正确。"}],linux:[{issue:"权限不足错误",solution:"确保使用sudo运行安装脚本，检查/etc/aimonitor目录的权限设置。"},{issue:"systemd服务无法启动",solution:"检查服务文件是否正确安装，使用journalctl -u aimonitor-agent查看详细日志。"}]}[e]||[{issue:"连接问题",solution:"检查网络连接和防火墙设置，确认服务器地址配置正确。"},{issue:"配置错误",solution:"验证配置文件格式，检查必需参数是否正确设置。"}]),A=(e,t)=>{if(e&&e.title&&e.installation_steps)return{agentType:t,title:e.title,description:e.description||`${t}监控Agent的安装和配置指南`,requirements:e.requirements||[],steps:(e.installation_steps||[]).map((e,n)=>({title:e,description:u(t,n),code:p(t,n),note:f(t,n)})),configuration:e.configuration?{title:"配置说明",content:"请根据实际环境修改以下配置参数：",example:v(e.configuration)}:void 0,troubleshooting:k(t)};return{windows:{agentType:"windows",title:"Windows Agent 安装指南",description:"在Windows系统上安装和配置AI Monitor Agent，用于监控系统性能、进程状态和资源使用情况。",requirements:["Windows 10 或更高版本","至少 100MB 可用磁盘空间","管理员权限",".NET Framework 4.7.2 或更高版本"],steps:[{title:"下载Agent安装包",description:"从官方网站下载最新版本的Windows Agent安装包。",code:'# 下载命令\nInvoke-WebRequest -Uri "https://releases.aimonitor.com/windows/latest.zip" -OutFile "aimonitor-agent.zip"'},{title:"解压安装包",description:"将下载的ZIP文件解压到目标目录。",code:'Expand-Archive -Path "aimonitor-agent.zip" -DestinationPath "C:\\Program Files\\AIMonitor"'},{title:"配置Agent",description:"编辑配置文件，设置监控服务器地址和认证信息。",note:"请确保配置文件中的服务器地址正确，否则Agent无法正常连接。"},{title:"安装服务",description:"以管理员身份运行安装脚本，将Agent注册为Windows服务。",code:".\\install-service.bat"},{title:"启动服务",description:"启动AI Monitor Agent服务。",code:'Start-Service "AIMonitor Agent"'}],configuration:{title:"Agent配置文件说明",content:"配置文件位于安装目录下的config.yaml，包含服务器连接、监控项目和日志设置。",example:'server:\n  host: "your-monitor-server.com"\n  port: 8080\n  token: "your-auth-token"\n\nmonitoring:\n  interval: 30s\n  metrics:\n    - cpu\n    - memory\n    - disk\n    - network\n\nlogging:\n  level: info\n  file: "logs/agent.log"'},troubleshooting:[{issue:"服务启动失败",solution:"检查配置文件格式是否正确，确保有管理员权限，查看Windows事件日志获取详细错误信息。"},{issue:"无法连接到监控服务器",solution:"验证网络连接，检查防火墙设置，确认服务器地址和端口配置正确。"}]},linux:{agentType:"linux",title:"Linux Agent 安装指南",description:"在Linux系统上安装和配置AI Monitor Agent，支持主流Linux发行版。",requirements:["Linux内核版本 3.10 或更高","至少 100MB 可用磁盘空间","root权限或sudo访问权限","systemd支持（推荐）"],steps:[{title:"下载安装包",description:"使用wget或curl下载Linux Agent安装包。",code:"wget https://releases.aimonitor.com/linux/aimonitor-agent-latest.tar.gz"},{title:"解压安装包",description:"解压下载的tar.gz文件。",code:"tar -xzf aimonitor-agent-latest.tar.gz\ncd aimonitor-agent"},{title:"运行安装脚本",description:"执行安装脚本，自动完成Agent的安装和配置。",code:"sudo ./install.sh",note:"安装脚本会自动检测系统类型并选择合适的安装方式。"},{title:"配置Agent",description:"编辑配置文件，设置监控参数。",code:"sudo nano /etc/aimonitor/config.yaml"},{title:"启动服务",description:"启动并启用AI Monitor Agent服务。",code:"sudo systemctl start aimonitor-agent\nsudo systemctl enable aimonitor-agent"}],configuration:{title:"Linux Agent配置",content:"配置文件位于/etc/aimonitor/config.yaml，包含完整的监控和连接设置。",example:'server:\n  endpoint: "https://your-server.com:8080"\n  api_key: "your-api-key"\n\nmonitoring:\n  system:\n    enabled: true\n    interval: "30s"\n  processes:\n    enabled: true\n    whitelist: ["nginx", "mysql", "redis"]\n\nlogging:\n  level: "info"\n  file: "/var/log/aimonitor/agent.log"\n  max_size: "100MB"'},troubleshooting:[{issue:"权限不足错误",solution:"确保使用sudo运行安装脚本，检查/etc/aimonitor目录的权限设置。"},{issue:"systemd服务无法启动",solution:"检查服务文件是否正确安装，使用journalctl -u aimonitor-agent查看详细日志。"}]},kafka:{agentType:"kafka",title:"Kafka Agent 安装指南",description:"监控Apache Kafka集群的性能指标、主题状态、消费者组延迟等关键信息。",requirements:["Kafka 2.0 或更高版本","Java 8 或更高版本","JMX端口访问权限","网络连接到Kafka集群"],steps:[{title:"下载Kafka Agent",description:"获取专用的Kafka监控Agent。",code:"wget https://releases.aimonitor.com/kafka/kafka-agent-latest.jar"},{title:"配置Kafka连接",description:"创建Kafka连接配置文件。",code:"cat > kafka-config.properties << EOF\nbootstrap.servers=localhost:9092\njmx.port=9999\nEOF"},{title:"启动Agent",description:"使用Java运行Kafka Agent。",code:"java -jar kafka-agent-latest.jar --config kafka-config.properties",note:"确保Kafka集群已启用JMX监控端口。"}],configuration:{title:"Kafka监控配置",content:"Kafka Agent支持监控多个集群，可配置主题、分区、消费者组等监控项。",example:'kafka:\n  clusters:\n    - name: "production"\n      bootstrap_servers: ["kafka1:9092", "kafka2:9092"]\n      jmx_port: 9999\n    - name: "staging"\n      bootstrap_servers: ["kafka-staging:9092"]\n      jmx_port: 9999\n\nmonitoring:\n  topics: ["user-events", "order-events"]\n  consumer_groups: ["analytics-group", "notification-group"]\n  metrics_interval: 30s'},troubleshooting:[{issue:"JMX连接失败",solution:"检查Kafka服务器的JMX配置，确保端口开放且无防火墙阻拦。"},{issue:"无法获取消费者组信息",solution:"验证Agent有足够权限访问Kafka集群，检查ACL配置。"}]}}[t]||{agentType:t,title:`${t.toUpperCase()} Agent 安装指南`,description:`${t}监控Agent的安装和配置指南。`,requirements:["系统要求待补充"],steps:[{title:"下载Agent",description:"从官方渠道下载对应的Agent安装包。"},{title:"安装配置",description:"按照系统要求进行安装和基础配置。"},{title:"启动服务",description:"启动监控服务并验证运行状态。"}]}};return a?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(m,{size:"large",tip:"加载安装指南中..."})}):d||!l?e.jsx(x,{status:"error",title:"加载失败",subTitle:d||"未找到对应的安装指南",extra:e.jsx(h,{type:"primary",icon:e.jsx(j,{}),onClick:()=>o(-1),children:"返回上一页"})}):e.jsxs("div",{children:[e.jsx("div",{style:{position:"fixed",top:"20px",left:"20px",zIndex:1e3},children:e.jsx(h,{icon:e.jsx(j,{}),onClick:()=>o(-1),style:{background:"rgba(255, 255, 255, 0.9)",border:"1px solid #d9d9d9",borderRadius:"6px"},children:"返回"})}),e.jsx(w,{...l})]})};export{b as default};
