import{j as e,H as t}from"./index-BqT3aLp1.js";import{r as s}from"./vendor-CZIWcOcD.js";import{i as a}from"./charts-BRUDwXyH.js";import{d as r,S as n,B as i,a3 as o,V as l,C as d,a as m,H as c,I as x,U as h,a1 as p,x as u,b as y,$ as f}from"./antd-B8UvalbT.js";const{Option:j}=h,{Search:g}=x,{TabPane:w}=m,v=()=>{const[x,v]=s.useState("servers"),[k,S]=s.useState(!1),[b,I]=s.useState(""),[C,M]=s.useState("all"),Y=[{id:"1",name:"web-server-01",ip:"192.168.1.10",os:"Ubuntu 20.04",status:"online",cpu:65,memory:78,disk:45,network:23,uptime:"15天 6小时",lastUpdate:r().subtract(1,"minute").format("YYYY-MM-DD HH:mm:ss")},{id:"2",name:"database-01",ip:"192.168.1.11",os:"CentOS 8",status:"warning",cpu:85,memory:92,disk:67,network:45,uptime:"8天 12小时",lastUpdate:r().subtract(2,"minute").format("YYYY-MM-DD HH:mm:ss")},{id:"3",name:"cache-server-01",ip:"192.168.1.12",os:"Ubuntu 22.04",status:"online",cpu:35,memory:56,disk:23,network:12,uptime:"25天 3小时",lastUpdate:r().subtract(30,"second").format("YYYY-MM-DD HH:mm:ss")},{id:"4",name:"backup-server-01",ip:"192.168.1.13",os:"Windows Server 2019",status:"offline",cpu:0,memory:0,disk:0,network:0,uptime:"离线",lastUpdate:r().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss")}],z=[{title:"服务器名称",dataIndex:"name",key:"name",render:(t,s)=>e.jsxs(n,{children:[e.jsx(u,{}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:s.ip})]})]})},{title:"操作系统",dataIndex:"os",key:"os"},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(y,{color:{online:"green",offline:"red",warning:"orange"}[t],children:{online:"在线",offline:"离线",warning:"告警"}[t]})},{title:"CPU",dataIndex:"cpu",key:"cpu",render:t=>e.jsx("div",{style:{width:"80px"},children:e.jsx(f,{percent:t,size:"small",strokeColor:t>80?"#ff4d4f":t>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"内存",dataIndex:"memory",key:"memory",render:t=>e.jsx("div",{style:{width:"80px"},children:e.jsx(f,{percent:t,size:"small",strokeColor:t>80?"#ff4d4f":t>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"磁盘",dataIndex:"disk",key:"disk",render:t=>e.jsx("div",{style:{width:"80px"},children:e.jsx(f,{percent:t,size:"small",strokeColor:t>80?"#ff4d4f":t>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"运行时间",dataIndex:"uptime",key:"uptime"},{title:"最后更新",dataIndex:"lastUpdate",key:"lastUpdate",render:t=>e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:t})}],U=[{title:"PID",dataIndex:"pid",key:"pid",width:80},{title:"进程名称",dataIndex:"name",key:"name",render:t=>e.jsxs(n,{children:[e.jsx(u,{}),e.jsx("span",{style:{fontWeight:500},children:t})]})},{title:"CPU使用率",dataIndex:"cpu",key:"cpu",render:e=>`${e}%`,sorter:(e,t)=>e.cpu-t.cpu},{title:"内存使用率",dataIndex:"memory",key:"memory",render:e=>`${e}%`,sorter:(e,t)=>e.memory-t.memory},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(y,{color:{running:"green",stopped:"red",sleeping:"blue"}[t],children:{running:"运行中",stopped:"已停止",sleeping:"休眠"}[t]})},{title:"用户",dataIndex:"user",key:"user"},{title:"启动时间",dataIndex:"startTime",key:"startTime",render:t=>e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:t})}];return s.useEffect(()=>{if("overview"===x){const e=a(document.getElementById("resource-chart")),t={title:{text:"系统资源使用率",textStyle:{fontSize:16}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["CPU","内存","磁盘","网络"]},xAxis:{type:"category",data:Array.from({length:24},(e,t)=>`${t}:00`)},yAxis:{type:"value",max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"CPU",type:"line",data:Array.from({length:24},()=>Math.floor(100*Math.random())),smooth:!0,lineStyle:{color:"#1890ff"}},{name:"内存",type:"line",data:Array.from({length:24},()=>Math.floor(100*Math.random())),smooth:!0,lineStyle:{color:"#52c41a"}},{name:"磁盘",type:"line",data:Array.from({length:24},()=>Math.floor(100*Math.random())),smooth:!0,lineStyle:{color:"#faad14"}},{name:"网络",type:"line",data:Array.from({length:24},()=>Math.floor(100*Math.random())),smooth:!0,lineStyle:{color:"#722ed1"}}]};e.setOption(t);const s=()=>{e.resize()};return window.addEventListener("resize",s),()=>{e.dispose(),window.removeEventListener("resize",s)}}},[x]),e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx("title",{children:"系统监控 - AI Monitor System"}),e.jsx("meta",{name:"description",content:"系统资源监控和服务器状态管理"})]}),e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"系统监控"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"实时监控系统资源使用情况和服务器状态"})]}),e.jsxs(n,{children:[e.jsx(i,{icon:e.jsx(o,{}),onClick:()=>{console.log("导出数据")},children:"导出数据"}),e.jsx(i,{icon:e.jsx(l,{}),loading:k,onClick:()=>{S(!0),setTimeout(()=>{S(!1)},1e3)},children:"刷新"}),e.jsx(i,{icon:e.jsx(d,{}),children:"设置"})]})]}),e.jsxs(m,{activeKey:x,onChange:v,children:[e.jsx(w,{tab:"概览",children:e.jsx(c,{className:"card-shadow mb-24",children:e.jsx("div",{id:"resource-chart",style:{height:"400px"}})})},"overview"),e.jsx(w,{tab:"服务器",children:e.jsxs(c,{className:"card-shadow",children:[e.jsx("div",{className:"flex-between mb-16",children:e.jsxs(n,{children:[e.jsx(g,{placeholder:"搜索服务器名称或IP",value:b,onChange:e=>I(e.target.value),style:{width:250},allowClear:!0}),e.jsxs(h,{value:C,onChange:M,style:{width:150},children:[e.jsx(j,{value:"all",children:"全部服务器"}),e.jsx(j,{value:"online",children:"在线"}),e.jsx(j,{value:"offline",children:"离线"}),e.jsx(j,{value:"warning",children:"告警"})]})]})}),e.jsx(p,{dataSource:Y.filter(e=>{const t=!b||e.name.toLowerCase().includes(b.toLowerCase())||e.ip.includes(b),s="all"===C||e.status===C;return t&&s}),columns:z,rowKey:"id",loading:k,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 台服务器`}})]})},"servers"),e.jsx(w,{tab:"进程",children:e.jsxs(c,{className:"card-shadow",children:[e.jsx("div",{className:"mb-16",children:e.jsx(g,{placeholder:"搜索进程名称或PID",style:{width:250},allowClear:!0})}),e.jsx(p,{dataSource:[{pid:1234,name:"nginx",cpu:15.6,memory:2.3,status:"running",user:"www-data",startTime:"2024-01-15 09:30:00"},{pid:5678,name:"mysql",cpu:25.8,memory:15.7,status:"running",user:"mysql",startTime:"2024-01-15 09:25:00"},{pid:9012,name:"redis-server",cpu:8.2,memory:3.4,status:"running",user:"redis",startTime:"2024-01-15 09:28:00"},{pid:3456,name:"node",cpu:12.4,memory:8.9,status:"running",user:"app",startTime:"2024-01-15 10:15:00"}],columns:U,rowKey:"pid",loading:k,pagination:{pageSize:15,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 个进程`}})]})},"processes")]})]})]})};export{v as default};
