import{j as e,H as s}from"./index-BRujWmcO.js";import{r as t}from"./vendor-D6r2_tUy.js";import{H as r,a,S as l,B as n,W as i,Y as d,F as c,b as o,J as x,K as m,X as p,a8 as h,a3 as u,a4 as j,Z as y,_ as k,w as g,c as f,a2 as w,y as v,a9 as I,e as b,aa as S,a6 as C}from"./antd-CCFmMVKp.js";const{Option:z}=p,{Search:P}=m,B=()=>{const[B,Y]=t.useState("servers"),[M,U]=t.useState(!1),[H,q]=t.useState(""),[D,A]=t.useState("all"),[F,T]=t.useState(!1),[$,K]=t.useState(!1),[O,W]=t.useState(!1),[L,N]=t.useState(null),[E,G]=t.useState(null),[J,R]=t.useState(null),[V]=r.useForm(),[Q]=r.useForm(),X=[{id:"1",name:"web-server-01",ip:"192.168.1.10",os:"Ubuntu 20.04",status:"online",cpu:65,memory:78,disk:45,network:23,uptime:"15天 6小时",lastUpdate:a().subtract(1,"minute").format("YYYY-MM-DD HH:mm:ss")},{id:"2",name:"database-01",ip:"192.168.1.11",os:"CentOS 8",status:"warning",cpu:85,memory:92,disk:67,network:45,uptime:"8天 12小时",lastUpdate:a().subtract(2,"minute").format("YYYY-MM-DD HH:mm:ss")},{id:"3",name:"cache-server-01",ip:"192.168.1.12",os:"Ubuntu 22.04",status:"online",cpu:35,memory:56,disk:23,network:12,uptime:"25天 3小时",lastUpdate:a().subtract(30,"second").format("YYYY-MM-DD HH:mm:ss")},{id:"4",name:"backup-server-01",ip:"192.168.1.13",os:"Windows Server 2019",status:"offline",cpu:0,memory:0,disk:0,network:0,uptime:"离线",lastUpdate:a().subtract(1,"hour").format("YYYY-MM-DD HH:mm:ss")}],Z=[{title:"网络接口",dataIndex:"interface",key:"interface",render:s=>e.jsxs(l,{children:[e.jsx(S,{}),e.jsx("span",{style:{fontWeight:500},children:s})]})},{title:"IP地址",dataIndex:"ip",key:"ip"},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx(f,{color:"up"===s?"green":"red",children:"up"===s?"启用":"禁用"})},{title:"速度",dataIndex:"speed",key:"speed"},{title:"接收流量",dataIndex:"rxBytes",key:"rxBytes"},{title:"发送流量",dataIndex:"txBytes",key:"txBytes"},{title:"接收包数",dataIndex:"rxPackets",key:"rxPackets",render:e=>e.toLocaleString()},{title:"发送包数",dataIndex:"txPackets",key:"txPackets",render:e=>e.toLocaleString()},{title:"错误数",dataIndex:"errors",key:"errors",render:s=>e.jsx("span",{style:{color:s>0?"#ff4d4f":"#52c41a"},children:s})},{title:"丢包数",dataIndex:"drops",key:"drops",render:s=>e.jsx("span",{style:{color:s>0?"#ff4d4f":"#52c41a"},children:s})}],_=[{id:"1",interface:"eth0",ip:"192.168.1.10",status:"up",speed:"1000 Mbps",rxBytes:"2.5 GB",txBytes:"1.8 GB",rxPackets:125e4,txPackets:98e4,errors:0,drops:0},{id:"2",interface:"eth1",ip:"10.0.0.15",status:"up",speed:"100 Mbps",rxBytes:"850 MB",txBytes:"650 MB",rxPackets:425e3,txPackets:325e3,errors:2,drops:1},{id:"3",interface:"lo",ip:"127.0.0.1",status:"up",speed:"N/A",rxBytes:"45 MB",txBytes:"45 MB",rxPackets:22500,txPackets:22500,errors:0,drops:0}],ee=[{pid:1234,name:"nginx",cpu:15.6,memory:2.3,status:"running",user:"www-data",startTime:"2024-01-15 09:30:00",serverId:"1"},{pid:5678,name:"mysql",cpu:25.8,memory:15.7,status:"running",user:"mysql",startTime:"2024-01-15 09:25:00",serverId:"2"},{pid:9012,name:"redis-server",cpu:8.2,memory:3.4,status:"running",user:"redis",startTime:"2024-01-15 09:28:00",serverId:"3"},{pid:3456,name:"node",cpu:12.4,memory:8.9,status:"running",user:"app",startTime:"2024-01-15 10:15:00",serverId:"1"}],se=[{title:"服务器名称",dataIndex:"name",key:"name",render:(s,t)=>e.jsxs(l,{children:[e.jsx(g,{}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:s}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:t.ip})]})]})},{title:"操作系统",dataIndex:"os",key:"os"},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx(f,{color:{online:"green",offline:"red",warning:"orange"}[s],children:{online:"在线",offline:"离线",warning:"告警"}[s]})},{title:"CPU",dataIndex:"cpu",key:"cpu",render:s=>e.jsx("div",{style:{width:"80px"},children:e.jsx(w,{percent:s,size:"small",strokeColor:s>80?"#ff4d4f":s>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"内存",dataIndex:"memory",key:"memory",render:s=>e.jsx("div",{style:{width:"80px"},children:e.jsx(w,{percent:s,size:"small",strokeColor:s>80?"#ff4d4f":s>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"磁盘",dataIndex:"disk",key:"disk",render:s=>e.jsx("div",{style:{width:"80px"},children:e.jsx(w,{percent:s,size:"small",strokeColor:s>80?"#ff4d4f":s>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"网络",dataIndex:"network",key:"network",render:s=>e.jsx("div",{style:{width:"80px"},children:e.jsx(w,{percent:s,size:"small",strokeColor:s>80?"#ff4d4f":s>60?"#faad14":"#52c41a",format:e=>`${e}%`})})},{title:"运行时间",dataIndex:"uptime",key:"uptime"},{title:"最后更新",dataIndex:"lastUpdate",key:"lastUpdate",render:s=>e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:s})},{title:"操作",key:"action",width:160,render:(s,t)=>e.jsxs(l,{size:"small",children:[e.jsx(n,{type:"link",size:"small",icon:e.jsx(v,{}),onClick:()=>re(t),title:"查看历史图表"}),e.jsx(n,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>ae(t)}),e.jsx(n,{type:"link",size:"small",danger:!0,icon:e.jsx(b,{}),onClick:()=>le(t.id)})]})}],te=[{title:"PID",dataIndex:"pid",key:"pid",width:80},{title:"进程名称",dataIndex:"name",key:"name",render:s=>e.jsxs(l,{children:[e.jsx(g,{}),e.jsx("span",{style:{fontWeight:500},children:s})]})},{title:"CPU使用率",dataIndex:"cpu",key:"cpu",render:e=>`${e}%`,sorter:(e,s)=>e.cpu-s.cpu},{title:"内存使用率",dataIndex:"memory",key:"memory",render:e=>`${e}%`,sorter:(e,s)=>e.memory-s.memory},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx(f,{color:{running:"green",stopped:"red",sleeping:"blue"}[s],children:{running:"运行中",stopped:"已停止",sleeping:"休眠"}[s]})},{title:"用户",dataIndex:"user",key:"user"},{title:"启动时间",dataIndex:"startTime",key:"startTime",render:s=>e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:s})},{title:"操作",key:"action",width:120,render:(s,t)=>e.jsxs(l,{size:"small",children:[e.jsx(n,{type:"link",size:"small",icon:e.jsx(I,{}),onClick:()=>ne(t)}),e.jsx(n,{type:"link",size:"small",danger:!0,icon:e.jsx(b,{}),onClick:()=>ie(t.pid)})]})}],re=e=>{R(e),W(!0)},ae=e=>{N(e),V.setFieldsValue(e),T(!0)},le=e=>{j.confirm({title:"确认删除",content:"确定要删除这台服务器吗？",onOk:()=>{C.success("删除成功")}})},ne=e=>{G(e),Q.setFieldsValue(e),K(!0)},ie=e=>{j.confirm({title:"确认删除",content:"确定要终止这个进程吗？",onOk:()=>{C.success("进程终止成功")}})};return t.useEffect(()=>{},[]),e.jsxs(e.Fragment,{children:[e.jsxs(s,{children:[e.jsx("title",{children:"系统监控 - AI Monitor System"}),e.jsx("meta",{name:"description",content:"系统资源监控和服务器状态管理"})]}),e.jsxs("div",{className:"fade-in",children:[e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:600},children:"系统监控"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#666"},children:"实时监控系统资源使用情况和服务器状态"})]}),e.jsxs(l,{children:[e.jsx(n,{icon:e.jsx(i,{}),onClick:()=>{console.log("导出数据")},children:"导出数据"}),e.jsx(n,{icon:e.jsx(d,{}),loading:M,onClick:()=>{U(!0),setTimeout(()=>{U(!1)},1e3)},children:"刷新"}),e.jsx(n,{icon:e.jsx(c,{}),children:"设置"})]})]}),e.jsx(o,{activeKey:B,onChange:Y,items:[{key:"servers",label:"服务器",children:e.jsxs(x,{className:"card-shadow",children:[e.jsxs("div",{className:"flex-between mb-16",children:[e.jsxs(l,{children:[e.jsx(P,{placeholder:"搜索服务器名称或IP",value:H,onChange:e=>q(e.target.value),style:{width:250},allowClear:!0}),e.jsxs(p,{value:D,onChange:A,style:{width:150},children:[e.jsx(z,{value:"all",children:"全部服务器"}),e.jsx(z,{value:"online",children:"在线"}),e.jsx(z,{value:"offline",children:"离线"}),e.jsx(z,{value:"warning",children:"告警"})]})]}),e.jsx(n,{type:"primary",icon:e.jsx(h,{}),onClick:()=>{N(null),V.resetFields(),T(!0)},children:"注册服务器"})]}),e.jsx(u,{dataSource:X.filter(e=>{const s=!H||e.name.toLowerCase().includes(H.toLowerCase())||e.ip.includes(H),t="all"===D||e.status===D;return s&&t}),columns:se,rowKey:"id",loading:M,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 台服务器`},expandable:{expandedRowRender:s=>e.jsx("div",{style:{margin:0},children:e.jsx(o,{defaultActiveKey:"process",size:"small",items:[{key:"process",label:"进程监控",children:e.jsx(u,{dataSource:ee,columns:te,rowKey:"pid",pagination:!1,size:"small"})},{key:"network",label:"网络监控",children:e.jsx(u,{dataSource:_,columns:Z,rowKey:"id",pagination:!1,size:"small"})}]})}),rowExpandable:()=>!0}})]})}]}),e.jsx(j,{title:L?"编辑服务器连接":"注册服务器连接",open:F,onOk:async()=>{try{await V.validateFields();L?C.success("服务器信息更新成功"):C.success("服务器添加成功"),T(!1)}catch(e){console.error("表单验证失败:",e)}},onCancel:()=>T(!1),width:600,children:e.jsxs(r,{form:V,layout:"vertical",children:[e.jsxs(y,{gutter:16,children:[e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"name",label:"连接名称",rules:[{required:!0,message:"请输入连接名称"}],children:e.jsx(m,{placeholder:"请输入连接名称"})})}),e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"os",label:"操作系统类型",rules:[{required:!0,message:"请选择操作系统类型"}],children:e.jsxs(p,{placeholder:"请选择操作系统类型",children:[e.jsx(z,{value:"linux",children:"Linux"}),e.jsx(z,{value:"windows",children:"Windows"}),e.jsx(z,{value:"macos",children:"macOS"})]})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(k,{span:16,children:e.jsx(r.Item,{name:"ip",label:"服务器地址",rules:[{required:!0,message:"请输入服务器地址"}],children:e.jsx(m,{placeholder:"请输入服务器地址或域名"})})}),e.jsx(k,{span:8,children:e.jsx(r.Item,{name:"port",label:"SSH端口",rules:[{required:!0,message:"请输入SSH端口"}],children:e.jsx(m,{placeholder:"22"})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"username",label:"用户名",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(m,{placeholder:"请输入用户名"})})}),e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"password",label:"密码",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(m.Password,{placeholder:"请输入密码"})})})]}),e.jsx(r.Item,{name:"description",label:"描述",children:e.jsx(m.TextArea,{placeholder:"请输入连接描述信息（可选）",rows:3})})]})}),e.jsx(j,{title:E?"编辑进程":"启动进程",open:$,onOk:async()=>{try{await Q.validateFields();E?C.success("进程信息更新成功"):C.success("进程启动成功"),K(!1)}catch(e){console.error("表单验证失败:",e)}},onCancel:()=>K(!1),width:600,children:e.jsxs(r,{form:Q,layout:"vertical",children:[e.jsxs(y,{gutter:16,children:[e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"name",label:"进程名称",rules:[{required:!0,message:"请输入进程名称"}],children:e.jsx(m,{placeholder:"请输入进程名称"})})}),e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"user",label:"运行用户",rules:[{required:!0,message:"请输入运行用户"}],children:e.jsx(m,{placeholder:"请输入运行用户"})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],children:e.jsxs(p,{placeholder:"请选择状态",children:[e.jsx(z,{value:"running",children:"运行中"}),e.jsx(z,{value:"stopped",children:"已停止"}),e.jsx(z,{value:"sleeping",children:"休眠"})]})})}),e.jsx(k,{span:12,children:e.jsx(r.Item,{name:"pid",label:"PID",children:e.jsx(m,{placeholder:"自动分配",disabled:!E})})})]})]})}),e.jsx(j,{title:`${null==J?void 0:J.name} - 历史监控数据`,open:O,onCancel:()=>W(!1),footer:null,width:1e3,style:{top:20},children:J&&e.jsx("div",{children:e.jsx(o,{defaultActiveKey:"cpu",type:"card",items:[{key:"cpu",label:"CPU使用率",children:e.jsx("div",{id:"cpu-chart",style:{width:"100%",height:"300px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0",color:"#999"},children:["CPU使用率历史图表",e.jsx("br",{}),e.jsx("small",{children:"显示过去24小时的CPU使用率趋势"})]})})},{key:"memory",label:"内存使用率",children:e.jsx("div",{id:"memory-chart",style:{width:"100%",height:"300px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0",color:"#999"},children:["内存使用率历史图表",e.jsx("br",{}),e.jsx("small",{children:"显示过去24小时的内存使用率趋势"})]})})},{key:"disk",label:"磁盘使用率",children:e.jsx("div",{id:"disk-chart",style:{width:"100%",height:"300px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0",color:"#999"},children:["磁盘使用率历史图表",e.jsx("br",{}),e.jsx("small",{children:"显示过去24小时的磁盘使用率趋势"})]})})},{key:"network",label:"网络流量",children:e.jsx("div",{id:"network-chart",style:{width:"100%",height:"300px"},children:e.jsxs("div",{style:{textAlign:"center",padding:"100px 0",color:"#999"},children:["网络流量历史图表",e.jsx("br",{}),e.jsx("small",{children:"显示过去24小时的网络流量趋势"})]})})}]})})})]})]})};export{B as default};
